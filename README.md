# Nekro Agent é•¿æœŸè®°å¿†æ’ä»¶ (nekro-plugin-memory)

> ä¸€ä¸ªä¸º NekroAgent æä¾›å¼ºå¤§é•¿æœŸè®°å¿†èƒ½åŠ›çš„æ’ä»¶ï¼ŒåŸºäº [mem0](https://github.com/mem0-ai/mem0) å®ç°ã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

- **ğŸ§  é•¿æœŸè®°å¿†**: è®© Agent èƒ½å¤Ÿè·¨è¶Šå¤šä¸ªä¼šè¯ï¼ŒæŒç»­è®°å¿†å’Œé—å¿˜å…³é”®ä¿¡æ¯ã€‚
- **ğŸ” æ™ºèƒ½æœç´¢**: æ”¯æŒåŸºäºè‡ªç„¶è¯­è¨€çš„è¯­ä¹‰æœç´¢ï¼Œèƒ½æ ¹æ®ä¸Šä¸‹æ–‡æ™ºèƒ½æ£€ç´¢ç›¸å…³è®°å¿†ã€‚
- **ğŸ”— æ¨¡å‹è”åŠ¨**: è‡ªåŠ¨ä¸ Nekro Agent å½“å‰ä½¿ç”¨çš„è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ä¿æŒä¸€è‡´ï¼Œæ— éœ€ä¸ºæ’ä»¶å•ç‹¬é…ç½®æ¨¡å‹ï¼Œå®ç°æ— ç¼é›†æˆã€‚
- **âš™ï¸ é«˜åº¦å¯é…**:
  - æ”¯æŒè‡ªå®šä¹‰ `Agent ID`ï¼Œä¸ºä¸åŒçš„ Agent æˆ–åœºæ™¯éš”ç¦»è®°å¿†ã€‚
  - æ”¯æŒé…ç½®ä¸åŒçš„ `Embedding` æ¨¡å‹ã€‚
  - **è§£å†³äº†ç»´åº¦ä¸åŒ¹é…é—®é¢˜**ï¼šå…è®¸æ˜¾å¼è®¾ç½® `Embedding` ç»´åº¦ï¼Œå®Œç¾æ”¯æŒ `text-embedding-004` (768ç»´) ç­‰æ¨¡å‹ã€‚
- **ğŸ’¾ å¤šç§åç«¯**: æ”¯æŒ `Qdrant`, `Chroma` ç­‰å¤šç§å‘é‡æ•°æ®åº“ä½œä¸ºè®°å¿†å­˜å‚¨åç«¯ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†æœ¬ä»“åº“

```bash
git clone https://github.com/johntime2005/nekro-plugin-memory.git
cd nekro-plugin-memory
```

### 2. å®‰è£…ä¾èµ–

æœ¬é¡¹ç›®ä½¿ç”¨ [Poetry](https://python-poetry.org/) è¿›è¡Œä¾èµ–ç®¡ç†ã€‚

```bash
# å®‰è£… poetry åŒ…ç®¡ç†å·¥å…·
pip install poetry

# è®¾ç½®è™šæ‹Ÿç¯å¢ƒç›®å½•åœ¨é¡¹ç›®ä¸‹ (å¯é€‰)
poetry config virtualenvs.in-project true

# å®‰è£…æ‰€æœ‰ä¾èµ–
poetry install
```

## ğŸ“ æ’ä»¶é…ç½®

æ’ä»¶åŠ è½½åï¼Œä½ å¯ä»¥åœ¨ Nekro Agent çš„é…ç½®é¡µé¢ä¸­æ‰¾åˆ°ä»¥ä¸‹å‚æ•°è¿›è¡Œè°ƒæ•´ï¼š

```python
class MemoryConfig(ConfigBase):
    """é•¿æœŸè®°å¿†æ’ä»¶é…ç½®"""

    agent_id: str = Field(
        default="nekro-agent",
        title="Agent ID",
        description="ç”¨äºéš”ç¦»ä¸åŒ Agent è®°å¿†çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚",
    )
    embedding_model: str = Field(
        default="text-embedding-3-large",
        title="Embedding æ¨¡å‹",
        description="ç”¨äºå°†æ–‡æœ¬å‘é‡åŒ–çš„åµŒå…¥æ¨¡å‹ã€‚",
    )
    embedding_dims: int = Field(
        default=1536,
        title="Embedding ç»´åº¦",
        description="æŒ‡å®šåµŒå…¥æ¨¡å‹çš„è¾“å‡ºç»´åº¦ã€‚ä¾‹å¦‚ï¼Œå¯¹äº text-embedding-004 ä½¿ç”¨ 768ï¼Œå¯¹äº text-embedding-3-large ä½¿ç”¨ 1536 æˆ– 3072ã€‚",
    )
    vector_store_provider: str = Field(
        default="qdrant",
        title="å‘é‡æ•°æ®åº“æä¾›å•†",
        description="æ”¯æŒ 'qdrant', 'chroma' ç­‰ã€‚",
    )
    qdrant_host: str = Field(
        default="localhost",
        title="Qdrant ä¸»æœºåœ°å€",
        description="å¦‚æœä½¿ç”¨ Qdrantï¼Œè¯·æŒ‡å®šå…¶ä¸»æœºåœ°å€ã€‚",
    )
    qdrant_port: int = Field(
        default=6333,
        title="Qdrant ç«¯å£",
        description="å¦‚æœä½¿ç”¨ Qdrantï¼Œè¯·æŒ‡å®šå…¶ç«¯å£ã€‚",
    )
```

## ğŸ› ï¸ å¯ç”¨å‡½æ•° (Agent å¯è°ƒç”¨)

Agent å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡½æ•°æ¥æ“ä½œè®°å¿†åº“ï¼š

- `add_memory(data: str, metadata: dict = None)`
  - **æè¿°**: ã€æ ¸å¿ƒåŠŸèƒ½ã€‘å‘è®°å¿†åº“ä¸­æ·»åŠ ä¸€æ¡æ–°çš„ä¿¡æ¯ã€‚å½“éœ€è¦è®°å½•å…³é”®äº‹å®ã€ç”¨æˆ·åå¥½æˆ–å¯¹è¯è¦ç‚¹ä»¥å¤‡å°†æ¥ä½¿ç”¨æ—¶è°ƒç”¨æ­¤æ–¹æ³•ã€‚
- `search_memory(query: str, limit: int = 5)`
  - **æè¿°**: ã€æ ¸å¿ƒåŠŸèƒ½ã€‘æ ¹æ®é—®é¢˜æˆ–å…³é”®è¯åœ¨è®°å¿†åº“ä¸­è¿›è¡Œæ™ºèƒ½æœç´¢ã€‚å½“éœ€è¦ä»è¿‡å»çš„è®°å¿†ä¸­å¯»æ‰¾ç›¸å…³ä¿¡æ¯ä»¥å›ç­”é—®é¢˜æˆ–è¿›è¡Œè”æƒ³æ—¶è°ƒç”¨ã€‚
- `get_all_memories()`
  - **æè¿°**: ã€è¾…åŠ©åŠŸèƒ½ã€‘è·å–æ‰€æœ‰å­˜å‚¨çš„è®°å¿†ã€‚ç”¨äºè°ƒè¯•æˆ–éœ€è¦å®Œæ•´å›é¡¾æ‰€æœ‰è®°å¿†çš„åœºæ™¯ã€‚è¯·æ³¨æ„ï¼Œæ•°æ®é‡å¯èƒ½å¾ˆå¤§ã€‚
- `delete_memory(memory_id: str)`
  - **æè¿°**: ã€ç®¡ç†åŠŸèƒ½ã€‘æ ¹æ®IDåˆ é™¤ä¸€æ¡æŒ‡å®šçš„è®°å¿†ã€‚ç”¨äºä¿®æ­£é”™è¯¯çš„è®°å¿†æˆ–ç§»é™¤ä¸å†éœ€è¦çš„ä¿¡æ¯ã€‚

## ğŸ“„ è®¸å¯è¯

MIT
